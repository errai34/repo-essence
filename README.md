# Repository Essence

A toolkit for extracting and filtering essential code from GitHub repositories, focusing on tutorials, examples, and documentation.

## Getting Started

### 1. Generate Repository XML

First, use `repomix` to create an XML representation of your target repository:

```bash
repomix --style xml --remote https://github.com/username/repository.git
```

This will create a merged XML file containing the repository's contents.

### 2. Filter the Repository

Use `filter_repo.py` to extract essential code (tutorials, examples, documentation) from the XML:

```bash
python3 filter_repo.py \
    --merged-xml path/to/repository.xml \
    --config comprehensive_config.xml \
    --output filtered_output.xml \
    --max-tokens 100000
```

Parameters:
- `--merged-xml`: Path to the XML file generated by repomix
- `--config`: XML configuration file defining what to extract (use `comprehensive_config.xml` for a broad selection)
- `--output`: Where to save the filtered repository
- `--max-tokens`: Maximum number of tokens in the output (default: 30000)

## Configuration

The `comprehensive_config.xml` includes patterns for:
- Tutorials and examples directories
- Documentation files
- Example code files (Python, JavaScript, etc.)
- Jupyter notebooks
- Test files with examples

## Example Usage

Here's how we filtered some astronomy libraries:

```bash
# Generate XML for gala repository
repomix --style xml --remote https://github.com/adrn/gala.git

# Filter it to extract examples and tutorials
python3 filter_repo.py \
    --merged-xml repopack/adrn-gala.xml \
    --config comprehensive_config.xml \
    --output filtered_repos/adrn-gala.filtered-100k.xml \
    --max-tokens 100000
```

## Results

The filtered output preserves the original file structure while keeping only the most relevant files for learning and understanding the codebase. For example:

- gala: 77 essential files, 99,992 tokens
- galpy: 31 essential files, 99,583 tokens
- agama: 38 essential files, 99,680 tokens
